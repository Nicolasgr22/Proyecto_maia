<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#1565C0" />
  <title>MAIA ¬∑ Valoraci√≥n Inmobiliaria</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<div class="app-shell">

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       NAVEGACI√ìN SUPERIOR COMPARTIDA
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="top-nav">
    <header class="app-bar">
      <!-- Bot√≥n volver (oculto en paso 1) -->
      <button class="icon-btn" id="nav-back" aria-label="Volver" hidden>
        <span class="material-symbols-rounded">arrow_back</span>
      </button>
      <!-- Spacer izquierdo (visible en paso 1) -->
      <div class="app-bar__spacer" id="spacer-left"></div>

      <h1 class="app-bar__title" id="nav-title">Datos del Inmueble</h1>

      <!-- Bot√≥n compartir (oculto en paso 1) -->
      <button class="icon-btn" id="nav-share" aria-label="Compartir" hidden onclick="shareResult()">
        <span class="material-symbols-rounded">share</span>
      </button>
      <!-- Spacer derecho (visible en paso 1) -->
      <div class="app-bar__spacer" id="spacer-right"></div>
    </header>

    <!-- Indicador de pasos (clickeable) -->
    <div class="step-progress">
      <div class="step-dots" role="navigation" aria-label="Pasos del proceso">
        <button class="step-dot active" data-step="1" onclick="goToStep(1)" aria-label="Paso 1: Datos del inmueble">
          <span class="step-dot__num">1</span>
          <span class="step-dot__label">Datos</span>
        </button>
        <div class="step-line" data-line="1"></div>
        <button class="step-dot" data-step="2" onclick="goToStep(2)" aria-label="Paso 2: Tu valoraci√≥n">
          <span class="step-dot__num">2</span>
          <span class="step-dot__label">Valoraci√≥n</span>
        </button>
        <div class="step-line" data-line="2"></div>
        <button class="step-dot" data-step="3" onclick="goToStep(3)" aria-label="Paso 3: An√°lisis">
          <span class="step-dot__num">3</span>
          <span class="step-dot__label">An√°lisis</span>
        </button>
      </div>
      <div class="progress-track" role="progressbar" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100" id="main-progress-bar">
        <div class="progress-fill" id="progress-fill" style="width:33%"></div>
      </div>
    </div>
  </div><!-- /top-nav -->


  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       CONTENEDOR DE PANTALLAS
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="screens-container">

    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
         PASO 1 ¬∑ Datos del Inmueble
         ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="step-1" class="screen active" aria-label="Datos del Inmueble">
      <div class="screen-scroll">

        <div class="screen-header">
          <h2 class="display-title">Cu√©ntanos sobre tu&nbsp;propiedad</h2>
          <p class="subtitle">Cuantos m√°s detalles proporciones, m√°s precisa ser√° nuestra valoraci√≥n de mercado.</p>
        </div>

        <form id="property-form" novalidate>

          <!-- ‚îÄ‚îÄ Superficies ‚îÄ‚îÄ -->
          <div class="form-section">
            <p class="form-section__title">
              <span class="material-symbols-rounded form-section__icon">square_foot</span>
              Superficies
            </p>
            <div class="form-grid">

              <!-- sqft_living ‚Äî full width -->
              <div class="field-group field--full">
                <label class="field-label" for="sqft-living">√ÅREA CONSTRUIDA HABITABLE</label>
                <div class="text-field">
                  <input type="number" id="sqft-living" name="sqft_living"
                    placeholder="Ej: 140" min="10" max="1400" step="1" inputmode="numeric" />
                  <span class="field-suffix">m¬≤</span>
                </div>
              </div>

              <!-- sqft_lot -->
              <div class="field-group">
                <label class="field-label" for="sqft-lot">√ÅREA DEL TERRENO</label>
                <div class="text-field">
                  <input type="number" id="sqft-lot" name="sqft_lot"
                    placeholder="Ej: 525" min="50" max="18500" inputmode="numeric" />
                  <span class="field-suffix">m¬≤</span>
                </div>
              </div>

              <!-- sqft_above -->
              <div class="field-group">
                <label class="field-label" for="sqft-above">√ÅREA SOBRE EL NIVEL DEL SUELO</label>
                <div class="text-field">
                  <input type="number" id="sqft-above" name="sqft_above"
                    placeholder="Ej: 110" min="0" max="1400" inputmode="numeric" />
                  <span class="field-suffix">m¬≤</span>
                </div>
                <span class="field-hint">Superficie sin incluir s√≥tano</span>
              </div>

            </div>
          </div>

          <!-- ‚îÄ‚îÄ Habitaciones y Estructura ‚îÄ‚îÄ -->
          <div class="form-section">
            <p class="form-section__title">
              <span class="material-symbols-rounded form-section__icon">bedroom_parent</span>
              Habitaciones y Estructura
            </p>
            <div class="form-grid">

              <!-- bedrooms -->
              <div class="field-group">
                <label class="field-label">HABITACIONES</label>
                <div class="counter" role="group" aria-label="N√∫mero de habitaciones">
                  <button type="button" class="counter-btn" data-target="bedrooms" data-action="dec" aria-label="Reducir">
                    <span class="material-symbols-rounded">remove</span>
                  </button>
                  <span class="counter-value" id="bedrooms-display">3</span>
                  <input type="hidden" id="bedrooms" name="bedrooms" value="3" />
                  <button type="button" class="counter-btn counter-btn--add" data-target="bedrooms" data-action="inc" aria-label="Aumentar">
                    <span class="material-symbols-rounded">add</span>
                  </button>
                </div>
              </div>

              <!-- bathrooms -->
              <div class="field-group">
                <label class="field-label">BA√ëOS</label>
                <div class="counter" role="group" aria-label="N√∫mero de ba√±os">
                  <button type="button" class="counter-btn" data-target="bathrooms" data-action="dec" aria-label="Reducir">
                    <span class="material-symbols-rounded">remove</span>
                  </button>
                  <span class="counter-value" id="bathrooms-display">2</span>
                  <input type="hidden" id="bathrooms" name="bathrooms" value="2" />
                  <button type="button" class="counter-btn counter-btn--add" data-target="bathrooms" data-action="inc" aria-label="Aumentar">
                    <span class="material-symbols-rounded">add</span>
                  </button>
                </div>
              </div>

              <!-- floors ‚Äî full width -->
              <div class="field-group field--full">
                <label class="field-label">N√öMERO DE PISOS</label>
                <div class="chip-group" role="radiogroup" aria-label="N√∫mero de pisos">
                  <input type="radio" name="floors" id="fl-1"  value="1"   class="chip-input" checked />
                  <label class="chip" for="fl-1">1</label>
                  <input type="radio" name="floors" id="fl-15" value="1.5" class="chip-input" />
                  <label class="chip" for="fl-15">1.5</label>
                  <input type="radio" name="floors" id="fl-2"  value="2"   class="chip-input" />
                  <label class="chip" for="fl-2">2</label>
                  <input type="radio" name="floors" id="fl-25" value="2.5" class="chip-input" />
                  <label class="chip" for="fl-25">2.5</label>
                  <input type="radio" name="floors" id="fl-3"  value="3"   class="chip-input" />
                  <label class="chip" for="fl-3">3+</label>
                </div>
              </div>

            </div>
          </div>

          <!-- ‚îÄ‚îÄ S√≥tano ‚îÄ‚îÄ -->
          <div class="form-section">
            <p class="form-section__title">
              <span class="material-symbols-rounded form-section__icon">foundation</span>
              S√≥tano
            </p>
            <div class="field-group">
              <div class="toggle-row">
                <div class="toggle-info">
                  <p class="toggle-label">¬øTIENE S√ìTANO?</p>
                  <p class="toggle-desc">La propiedad cuenta con √°rea habitable bajo el nivel del suelo</p>
                </div>
                <label class="toggle-switch" aria-label="Tiene s√≥tano">
                  <input type="checkbox" id="has-basement" role="switch" />
                  <span class="toggle-track"><span class="toggle-thumb"></span></span>
                </label>
              </div>
              <div id="basement-reveal" class="basement-reveal" hidden>
                <label class="field-label" for="sqft-basement">√ÅREA DEL S√ìTANO</label>
                <div class="text-field">
                  <input type="number" id="sqft-basement" name="sqft_basement"
                    placeholder="Ej: 72" min="1" max="465" inputmode="numeric" />
                  <span class="field-suffix">m¬≤</span>
                </div>
              </div>
            </div>
          </div>

          <!-- ‚îÄ‚îÄ Estado y Calidad ‚îÄ‚îÄ -->
          <div class="form-section">
            <p class="form-section__title">
              <span class="material-symbols-rounded form-section__icon">verified</span>
              Estado y Calidad
            </p>

            <!-- condition -->
            <div class="field-group">
              <div class="field-label-row">
                <label class="field-label" for="condition">ESTADO DE CONSERVACI√ìN</label>
                <span class="field-badge" id="condition-label">Buen estado</span>
              </div>
              <input type="range" id="condition" name="condition"
                min="1" max="5" value="3" class="slider" aria-label="Estado de conservaci√≥n" />
              <div class="slider-marks">
                <span>A reformar</span>
                <span>Reformado</span>
                <span>A estrenar</span>
              </div>
            </div>

            <!-- grade -->
            <div class="field-group">
              <div class="field-label-row">
                <label class="field-label" for="grade">CALIFICACI√ìN DE LA CONSTRUCCI√ìN</label>
                <span class="field-badge" id="grade-label">7 / 13</span>
              </div>
              <input type="range" id="grade" name="grade"
                min="1" max="13" value="7" class="slider" aria-label="Calificaci√≥n de la construcci√≥n" />
              <div class="slider-marks">
                <span>B√°sica</span>
                <span>Est√°ndar</span>
                <span>Lujo</span>
              </div>
            </div>

          </div>

          <!-- ‚îÄ‚îÄ Antig√ºedad (opcional) ‚îÄ‚îÄ -->
          <div class="form-section">
            <p class="form-section__title">
              <span class="material-symbols-rounded form-section__icon">history</span>
              Antig√ºedad
              <span class="optional-tag">opcional</span>
            </p>
            <div class="field-group">
              <div class="field-label-row">
                <label class="field-label" for="yr-age">¬øQU√â TAN ANTIGUO ES EL INMUEBLE?</label>
                <span class="field-badge" id="age-label">Nuevo</span>
              </div>
              <input type="range" id="yr-age" name="yr_age"
                min="1900" max="2026" step="5" value="2026"
                class="slider age-slider"
                aria-label="A√±o de construcci√≥n del inmueble" />
              <div class="age-track-labels">
                <span>~1900</span>
                <span>Nuevo</span>
              </div>
              <p class="field-hint age-hint" id="age-hint">Construido aproximadamente hoy</p>
              <input type="hidden" id="yr-built" name="yr_built" value="" />
            </div>
          </div>

        </form>
      </div><!-- /screen-scroll -->

      <div class="bottom-bar">
        <button class="btn-primary btn-full" onclick="submitValuation()">
          <span>Obtener Valoraci√≥n</span>
          <span class="material-symbols-rounded">trending_up</span>
        </button>
        <p class="bottom-note">La valoraci√≥n se basa en datos de mercado actualizados hoy.</p>
      </div>
    </section>


    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
         PASO 2 ¬∑ Tu Valoraci√≥n
         ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="step-2" class="screen" aria-label="Tu Valoraci√≥n">
      <div class="screen-scroll">

        <!-- Hero precio -->
        <div class="valuation-hero">
          <p class="valuation-hero__eyebrow">ESTIMACI√ìN DE MERCADO</p>
          <p class="valuation-hero__price" id="price-range">‚Äî</p>
          <div class="confidence-row" id="confidence-badge">
            <span class="material-symbols-rounded confidence-icon">check_circle</span>
            <span>Confianza del c√°lculo: <strong id="confidence-text">‚Äî</strong></span>
          </div>
        </div>

        <!-- Estado del mercado -->
        <div class="card card--elevated">
          <div class="card-header">
            <span class="card-emoji">üî•</span>
            <h3 class="card-title">Estado del Mercado</h3>
          </div>
          <div class="thermometer">
            <div class="thermometer__track">
              <div class="thermometer__dot" id="market-dot" style="left:75%"></div>
            </div>
            <div class="thermometer__labels">
              <span>FR√çO</span>
              <span>EQUILIBRADO</span>
              <span>CALIENTE</span>
            </div>
          </div>
          <div class="market-message" id="market-message">
            <p id="market-text">‚Äî</p>
          </div>
        </div>

        <!-- Comparativa de zona -->
        <h3 class="section-title">Comparativa de Zona</h3>
        <div class="stats-row">
          <div class="stat-card">
            <span class="stat-icon material-symbols-rounded">location_on</span>
            <p class="stat-label">Precio medio zona</p>
            <p class="stat-value" id="zone-avg-price">‚Äî</p>
          </div>
          <div class="stat-card">
            <span class="stat-icon material-symbols-rounded">trending_up</span>
            <p class="stat-label">Tendencia anual</p>
            <p class="stat-value positive" id="annual-trend">‚Äî</p>
          </div>
        </div>

        <!-- Nota comparativa -->
        <div class="info-note card">
          <span class="material-symbols-rounded note-icon">info</span>
          <p>Esta estimaci√≥n es un <strong id="vs-zone">‚Äî</strong> a la media de la zona.</p>
        </div>

        <!-- CTA ‚Üí Paso 3 -->
        <button class="btn-primary btn-full" id="view-analysis-btn">
          <span class="material-symbols-rounded">analytics</span>
          <span>Ver An√°lisis Completo</span>
        </button>

      </div><!-- /screen-scroll -->

      <div class="bottom-bar">
        <button class="btn-secondary btn-full" onclick="contactExpert()">
          <span class="material-symbols-rounded">support_agent</span>
          <span>Contactar tasador profesional</span>
        </button>
        <p class="bottom-note">Esta es una estimaci√≥n autom√°tica basada en datos hist√≥ricos. Para una valoraci√≥n legal, solicita una tasaci√≥n oficial.</p>
      </div>
    </section>


    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
         PASO 3 ¬∑ An√°lisis de Mercado
         ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="step-3" class="screen" aria-label="An√°lisis de Mercado">
      <div class="screen-scroll">

        <!-- Estimaci√≥n actual -->
        <div class="card estimation-card">
          <div class="estimation-card__top">
            <span class="estimation-eyebrow">ESTIMACI√ìN ACTUAL</span>
            <span class="confidence-chip" id="analysis-conf-chip">Alta Confianza</span>
          </div>
          <p class="estimation-price" id="analysis-price">‚Äî</p>
          <div class="estimation-meta">
            <span class="positive" id="monthly-change">‚Äî</span>
            <span class="muted"> ¬∑ Margen +/- <span id="margin-pct">3</span>%</span>
          </div>
        </div>

        <!-- Alerta de mercado -->
        <div class="alert-card alert-card--green" id="market-alert">
          <span class="material-symbols-rounded alert-icon">trending_up</span>
          <div>
            <strong id="alert-title">Momento √ìptimo para Vender</strong>
            <p id="alert-desc">El mercado local est√° al alza con baja oferta disponible.</p>
          </div>
        </div>

        <!-- Evoluci√≥n del precio -->
        <div class="chart-section">
          <div class="chart-header">
            <div>
              <h3 class="section-title">Evoluci√≥n del Precio</h3>
              <p class="chart-subtitle">Hist√≥rico √∫ltimos 12 meses</p>
            </div>
            <div class="chart-kpi">
              <p class="chart-kpi__value" id="price-per-sqft">‚Äî</p>
              <p class="chart-kpi__trend positive" id="kpi-trend">‚Äî</p>
            </div>
          </div>
          <div class="chart-wrap">
            <canvas id="price-chart" aria-label="Gr√°fico de evoluci√≥n de precios"></canvas>
          </div>
        </div>

        <!-- Impacto de caracter√≠sticas -->
        <div class="impacts-section">
          <div class="impacts-header">
            <h3 class="section-title">Impacto de Caracter√≠sticas</h3>
            <button class="icon-btn-sm" aria-label="Informaci√≥n sobre el impacto">
              <span class="material-symbols-rounded">info</span>
            </button>
          </div>
          <div class="impacts-list" id="impacts-list">
            <!-- Populated by JS -->
          </div>
        </div>

        <!-- Comparativa de barrio -->
        <div class="neighborhood-card" aria-label="Comparativa de barrio">
          <div class="neighborhood-card__overlay">
            <div class="neighborhood-card__icon">
              <span class="material-symbols-rounded">location_city</span>
            </div>
            <div>
              <p class="neighborhood-card__label">Comparativa de Barrio</p>
              <p class="neighborhood-card__value" id="neighborhood-text">
                14 Propiedades similares vendidas recientemente
              </p>
            </div>
          </div>
        </div>

      </div><!-- /screen-scroll -->

      <div class="bottom-bar bottom-bar--duo">
        <button class="btn-primary btn-full" onclick="contactExpert()">
          <span class="material-symbols-rounded">support_agent</span>
          <span>Consultar Experto</span>
        </button>
        <button class="btn-icon" aria-label="Guardar informe" onclick="saveReport()">
          <span class="material-symbols-rounded">save_alt</span>
        </button>
      </div>
    </section>

  </div><!-- /screens-container -->

</div><!-- /app-shell -->


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Loading overlay ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="loading-overlay" class="loading-overlay hidden" role="alert" aria-live="polite">
  <div class="loading-card">
    <div class="loading-spinner" aria-hidden="true"></div>
    <p class="loading-title" id="loading-text">Calculando valoraci√≥n‚Ä¶</p>
    <p class="loading-sub">Analizando datos de mercado de la zona</p>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Toast ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="toast" class="toast hidden" role="status" aria-live="polite"></div>


<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="app.js" type="module"></script>
</body>
</html>
